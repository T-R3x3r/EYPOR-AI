/* Angular Material Theme */
@import '~@angular/material/prebuilt-themes/indigo-pink.css';

/* Global Styles */
* {
  margin: 0;
  padding: 0;
  box-sizing: border-box;
}

html, body {
  height: 100%;
  overflow: hidden; /* Prevent body scroll */
}

body {
  font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;
  background-color: #f5f5f5;
  color: #333;
  line-height: 1.6;
  margin: 0;
  padding: 0;
  transition: background-color 0.3s ease, color 0.3s ease;
}

.container {
  max-width: 1200px;
  margin: 0 auto;
  padding: 20px;
}

.sidebar {
  background: white;
  border-radius: 8px;
  box-shadow: 0 2px 10px rgba(0,0,0,0.1);
  padding: 20px;
  margin-bottom: 20px;
}

.main-content {
  background: white;
  border-radius: 8px;
  box-shadow: 0 2px 10px rgba(0,0,0,0.1);
  padding: 20px;
}

.btn {
  padding: 0.5rem 1rem;
  border: none;
  border-radius: 4px;
  cursor: pointer;
  font-size: 0.9rem;
  transition: all 0.2s ease;
  text-decoration: none;
  display: inline-block;
  text-align: center;
}

.btn-primary {
  background-color: #21acf6;
  color: white;
}

.btn-primary:hover {
  background-color: #1e9be6;
}

.btn-secondary {
  background-color: #747480;
  color: white;
}

.btn-secondary:hover {
  background-color: #626269;
}

.btn-success {
  background-color: #1eca3a;
  color: white;
}

.btn-success:hover {
  background-color: #1ab832;
}

.btn-danger {
  background-color: #a11c1c;
  color: white;
}

.btn-danger:hover {
  background-color: #901919;
}

.btn-sm {
  padding: 4px 8px;
  font-size: 12px;
}

.file-tree {
  margin: 10px 0;
}

.file-item {
  display: flex;
  align-items: center;
  padding: 4px 0;
  border-bottom: 1px solid #eee;
}

.file-item:last-child {
  border-bottom: none;
}

.file-name {
  flex: 1;
  font-family: 'Courier New', monospace;
  font-size: 14px;
}

.file-actions {
  display: flex;
  gap: 4px;
}

.chat-container {
  height: 400px;
  border: 1px solid #ddd;
  border-radius: 4px;
  display: flex;
  flex-direction: column;
}

.chat-messages {
  flex: 1;
  overflow-y: auto;
  padding: 10px;
  background: #f8f9fa;
}

.chat-input {
  display: flex;
  padding: 10px;
  border-top: 1px solid #ddd;
  background: white;
}

.chat-input input {
  flex: 1;
  padding: 8px;
  border: 1px solid #ddd;
  border-radius: 4px;
  margin-right: 10px;
}

.message {
  margin-bottom: 10px;
  padding: 8px 12px;
  border-radius: 8px;
  max-width: 80%;
}

.message.user {
  background: #FFE600;
  color: black;
  margin-left: auto;
}

.message.assistant {
  background: #e9ecef;
  color: #333;
}

.file-editor {
  margin-top: 20px;
}

.file-selector {
  margin-bottom: 15px;
}

.file-selector select {
  width: 100%;
  padding: 8px;
  border: 1px solid #ddd;
  border-radius: 4px;
}

.editor-container {
  border: 1px solid #ddd;
  border-radius: 4px;
}

.editor-textarea {
  width: 100%;
  min-height: 300px;
  padding: 10px;
  border: none;
  resize: vertical;
  font-family: 'Courier New', monospace;
  font-size: 14px;
  line-height: 1.4;
}

.editor-actions {
  padding: 10px;
  border-top: 1px solid #ddd;
  background: #f8f9fa;
  display: flex;
  gap: 10px;
}

.file-stats {
  background: #f8f9fa;
  padding: 15px;
  border-radius: 4px;
  margin-bottom: 15px;
}

.stats-grid {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(100px, 1fr));
  gap: 10px;
}

.stat-item {
  text-align: center;
}

.stat-value {
  font-size: 24px;
  font-weight: bold;
  color: #FFE600;
}

.stat-label {
  font-size: 12px;
  color: #666;
  text-transform: uppercase;
}

.output-container {
  margin-top: 20px;
  padding: 15px;
  background: #f8f9fa;
  border-radius: 4px;
  border-left: 4px solid #FFE600;
}

.output-title {
  font-weight: bold;
  margin-bottom: 10px;
  color: #333;
}

.output-content {
  font-family: 'Courier New', monospace;
  font-size: 14px;
  white-space: pre-wrap;
  background: white;
  padding: 10px;
  border-radius: 4px;
  border: 1px solid #ddd;
}

.error-output {
  border-left-color: #a11c1c;
}

.error-output .output-content {
  color: #a11c1c;
}

.loading {
  display: inline-block;
  width: 20px;
  height: 20px;
  border: 3px solid #f3f3f3;
  border-top: 3px solid #FFE600;
  border-radius: 50%;
  animation: spin 1s linear infinite;
}

@keyframes spin {
  0% { transform: rotate(0deg); }
  100% { transform: rotate(360deg); }
}

.alert {
  padding: 12px 16px;
  border-radius: 4px;
  margin-bottom: 15px;
}

.alert-success {
  background: #d4edda;
  color: #155724;
  border: 1px solid #c3e6cb;
}

.alert-error {
  background: #f8d7da;
  color: #721c24;
  border: 1px solid #f5c6cb;
}

.alert-warning {
  background: #fff3cd;
  color: #856404;
  border: 1px solid #ffeaa7;
}

.alert-info {
  background: #d1ecf1;
  color: #0c5460;
  border: 1px solid #bee5eb;
}

/* Dark Mode Styles */
body.dark-mode {
  background: #1a1a24 !important;
  color: #eaeaf2 !important;
}

/* Selective dark mode - target specific container types */
body.dark-mode .sidebar,
body.dark-mode .main-layout,
body.dark-mode .right-panel,
body.dark-mode .execution-window,
body.dark-mode .chat-container,
body.dark-mode .sql-container,
body.dark-mode .file-upload,
body.dark-mode .output-container {
  background: #2e2e38 !important;
  color: #eaeaf2 !important;
}

/* Text elements should have transparent backgrounds to inherit from parents */
body.dark-mode p,
body.dark-mode span,
body.dark-mode div:not([class*="btn"]):not([class*="badge"]):not([class*="status"]):not(.action-buttons),
body.dark-mode h1, body.dark-mode h2, body.dark-mode h3, body.dark-mode h4, body.dark-mode h5, body.dark-mode h6,
body.dark-mode label,
body.dark-mode li {
  background: transparent !important;
  color: #eaeaf2 !important;
}

/* Specific white areas that need to be dark */
body.dark-mode .messages-container,
body.dark-mode .chat-messages,
body.dark-mode .upload-area,
body.dark-mode .file-list,
body.dark-mode .file-tree,
body.dark-mode .execution-content,
body.dark-mode .tab-content,
body.dark-mode .sidebar-content {
  background: #2e2e38 !important;
}

/* Areas that should be darker for contrast */
body.dark-mode .message-content,
body.dark-mode .upload-info,
body.dark-mode .output-content,
body.dark-mode .sql-results,
body.dark-mode .results-table,
body.dark-mode .sql-database {
  background: #1a1a24 !important;
  color: #eaeaf2 !important;
}

/* Fix yellow dividers to be blue in dark mode */
body.dark-mode .file-upload-section h3::after,
body.dark-mode .file-structure-section h3::after,
body.dark-mode .execution-content h3::after,
body.dark-mode [class*="section"] h3::after,
body.dark-mode h3[style*="border-bottom"] {
  border-bottom-color: #21acf6 !important;
}

/* Yellow divider lines should be blue */
body.dark-mode hr,
body.dark-mode .divider,
body.dark-mode [style*="border-bottom: 2px solid #FFE600"],
body.dark-mode [style*="border-bottom-color: #FFE600"] {
  border-color: #21acf6 !important;
}

/* Only override button colors for primary interface buttons, not file operation buttons */
body.dark-mode .tab-btn.btn-primary,
body.dark-mode .send-btn,
body.dark-mode button.btn-primary:not(.file-actions button):not([class*="file"]) {
  background: #21acf6 !important;
  color: white !important;
}

body.dark-mode button.btn-success:not(.file-actions button):not([class*="file"]) {
  background: #1eca3a !important;
  color: white !important;
}

body.dark-mode button.btn-danger:not(.file-actions button):not([class*="file"]) {
  background: #a11c1c !important;
  color: white !important;
}

body.dark-mode button.btn-secondary:not(.file-actions button):not([class*="file"]) {
  background: #747480 !important;
  color: white !important;
}

/* Don't override specific button colors - preserve yellow run buttons, purple download buttons, etc. */
body.dark-mode .file-actions button,
body.dark-mode .file-item button,
body.dark-mode .uploaded-files button {
  /* Preserve original colors - don't override */
}

/* Make "Uploaded Files" section have a lighter background for separation */
body.dark-mode .uploaded-files-section,
body.dark-mode .file-structure-section {
  background: #1a1a24 !important;
  border: 1px solid #474755 !important;
  border-radius: 6px !important;
  padding: 1rem !important;
  margin-bottom: 1rem !important;
}

/* File badges and status indicators - preserve original colors */
body.dark-mode .file-badge,
body.dark-mode [class*="badge"] {
  /* Don't override - let individual components handle their colors */
}

/* Form inputs */
body.dark-mode input,
body.dark-mode textarea,
body.dark-mode select {
  background: #1a1a24 !important;
  color: #eaeaf2 !important;
  border-color: #474755 !important;
}

/* Border colors for containers */
body.dark-mode .sidebar,
body.dark-mode .execution-window,
body.dark-mode .right-panel,
body.dark-mode .tab-content {
  border-color: #474755 !important;
}

/* Don't override badge and status colors - let them keep their original styling */
body.dark-mode .file-badge.python,
body.dark-mode .file-badge.database,
body.dark-mode .file-badge.csv,
body.dark-mode .file-badge.excel,
body.dark-mode .status-badge,
body.dark-mode [class*="badge"] {
  /* Preserve original colors */
}

/* Header Dark Mode */
body.dark-mode .app-header {
  background: #21acf6 !important;
  color: white !important;
}

/* EYPOR header and other component headers */
body.dark-mode .sql-header,
body.dark-mode [class*="header"]:not(.app-header) {
  background: #21acf6 !important;
  color: white !important;
}

/* Execution output header */
body.dark-mode .output-header,
body.dark-mode .execution-header {
  background: #1a1a24 !important;
  color: #eaeaf2 !important;
}

body.dark-mode .settings-btn {
  color: white;
  background: rgba(255, 255, 255, 0.1);
  border-color: rgba(255, 255, 255, 0.2);
}

body.dark-mode .settings-btn:hover {
  background: rgba(255, 255, 255, 0.2);
}

body.dark-mode .settings-menu {
  background: #2e2e38;
  border-color: #474755;
  color: #eaeaf2;
}

body.dark-mode .settings-header {
  background: #1a1a24;
  border-bottom-color: #474755;
}

body.dark-mode .settings-header h4 {
  color: #eaeaf2;
}

body.dark-mode .setting-label {
  color: #eaeaf2;
}

body.dark-mode .toggle-input:checked + .toggle-slider {
  background-color: #21acf6;
}

/* Main Layout Dark Mode */
body.dark-mode .sidebar,
body.dark-mode .execution-window,
body.dark-mode .right-panel {
  background: #2e2e38;
  border-color: #474755;
}

body.dark-mode .sidebar-content h3,
body.dark-mode .execution-content h3 {
  color: #eaeaf2;
}

/* Tab Navigation Dark Mode */
body.dark-mode .tab-navigation {
  background: #1a1a24 !important;
  border-bottom-color: #474755 !important;
}

body.dark-mode .tab-btn {
  background: transparent !important;
  color: #c2c2cf !important;
  border-color: transparent !important;
}

body.dark-mode .tab-btn:hover {
  background: rgba(33, 172, 246, 0.1) !important;
  color: #21acf6 !important;
}

body.dark-mode .tab-btn.active {
  background: #21acf6 !important;
  color: white !important;
  border-color: #21acf6 !important;
}

/* Chat Component Dark Mode */
body.dark-mode .chat-container {
  background: #2e2e38 !important;
  color: #eaeaf2 !important;
}

body.dark-mode .chat-header {
  background: #21acf6 !important;
  color: white !important;
}

body.dark-mode .chat-messages {
  background: #2e2e38 !important;
}

body.dark-mode .message {
  background: #1a1a24 !important;
  border-color: #474755 !important;
  color: #eaeaf2 !important;
}

body.dark-mode .message.user {
  background: #21acf6 !important;
  color: white !important;
}

body.dark-mode .message.bot {
  background: #1a1a24 !important;
  color: #eaeaf2 !important;
}

body.dark-mode .welcome-message {
  background: #1a1a24 !important;
  border-color: #21acf6 !important;
  color: #eaeaf2 !important;
}

body.dark-mode .chat-input-container {
  background: #1a1a24 !important;
  border-top-color: #474755 !important;
}

body.dark-mode .chat-input {
  background: #2e2e38 !important;
  border-color: #474755 !important;
  color: #eaeaf2 !important;
}

body.dark-mode .chat-input::placeholder {
  color: #747480 !important;
}

body.dark-mode .chat-input:focus {
  border-color: #21acf6 !important;
}

body.dark-mode .send-btn {
  background: #21acf6 !important;
}

body.dark-mode .send-btn:hover {
  background: #1e9be6 !important;
}

/* File Upload Dark Mode */
body.dark-mode .file-upload-container {
  background: #2e2e38;
}

body.dark-mode .upload-area {
  background: #3a3a48;
  border-color: #474755;
  color: #eaeaf2;
}

body.dark-mode .upload-area.drag-over {
  border-color: #21acf6;
  background: rgba(33, 172, 246, 0.1);
}

body.dark-mode .upload-instructions {
  background: #1a1a24 !important;
  color: #c2c2cf !important;
}

body.dark-mode .upload-instructions h4 {
  color: #eaeaf2 !important;
}

body.dark-mode .file-list {
  background: #1a1a24 !important;
  border-color: #474755 !important;
}

body.dark-mode .file-item {
  background: #1a1a24 !important;
  border-color: #474755 !important;
  color: #eaeaf2 !important;
}

/* File Tree Dark Mode */
body.dark-mode .file-tree {
  background: #2e2e38 !important;
  color: #eaeaf2 !important;
}

body.dark-mode .file-item.file {
  color: #c2c2cf !important;
}

body.dark-mode .file-item.folder {
  color: #eaeaf2 !important;
}

body.dark-mode .file-item:hover {
  background: rgba(33, 172, 246, 0.1) !important;
}

/* SQL Query Dark Mode */
body.dark-mode .sql-container {
  background: #2e2e38 !important;
}

body.dark-mode .sql-editor {
  background: #1a1a24 !important;
  border-color: #474755 !important;
  color: #eaeaf2 !important;
}

body.dark-mode .sql-results {
  background: #1a1a24 !important;
  border-color: #474755 !important;
}

body.dark-mode .results-table {
  background: #1a1a24 !important;
  color: #eaeaf2 !important;
}

body.dark-mode .results-table th {
  background: #2e2e38 !important;
  color: #eaeaf2 !important;
}

body.dark-mode .results-table td {
  border-color: #474755 !important;
  color: #eaeaf2 !important;
}

body.dark-mode .results-table tr:nth-child(even) {
  background: rgba(46, 46, 56, 0.5) !important;
}

/* Output Display Dark Mode */
body.dark-mode .output-container {
  background: #2e2e38 !important;
}

body.dark-mode .output-content {
  background: #1a1a24 !important;
  border-color: #474755 !important;
  color: #eaeaf2 !important;
}

body.dark-mode .output-line {
  color: #eaeaf2 !important;
}

body.dark-mode .output-line.error {
  color: #ff6b6b !important;
}

body.dark-mode .output-line.success {
  color: #1eca3a !important;
}

/* Form Elements Dark Mode */
body.dark-mode input,
body.dark-mode textarea,
body.dark-mode select {
  background: #3a3a48;
  border-color: #474755;
  color: #eaeaf2;
}

body.dark-mode input::placeholder,
body.dark-mode textarea::placeholder {
  color: #747480;
}

body.dark-mode input:focus,
body.dark-mode textarea:focus,
body.dark-mode select:focus {
  border-color: #1a9afa;
}

/* Scrollbar Dark Mode */
body.dark-mode ::-webkit-scrollbar {
  width: 8px;
  height: 8px;
}

body.dark-mode ::-webkit-scrollbar-track {
  background: #2e2e38;
}

body.dark-mode ::-webkit-scrollbar-thumb {
  background: #474755;
  border-radius: 4px;
}

body.dark-mode ::-webkit-scrollbar-thumb:hover {
  background: #5a5a6a;
}

/* Dialog/Modal Dark Mode */
body.dark-mode .modal-content,
body.dark-mode .dialog-content {
  background: #2e2e38;
  border-color: #474755;
  color: #eaeaf2;
}

body.dark-mode .modal-header,
body.dark-mode .dialog-header {
  background: #3a3a48;
  border-bottom-color: #474755;
  color: #eaeaf2;
}

/* Code/Pre elements Dark Mode */
body.dark-mode pre,
body.dark-mode code {
  background: #3a3a48;
  color: #eaeaf2;
  border: 1px solid #474755;
}

/* Links Dark Mode */
body.dark-mode a {
  color: #1a9afa;
}

body.dark-mode a:hover {
  color: #4fc3f7;
}

/* Additional comprehensive dark mode fixes */
body.dark-mode * {
  border-color: #474755;
}

/* Make sure all text elements are properly colored */
body.dark-mode h1,
body.dark-mode h2,
body.dark-mode h3,
body.dark-mode h4,
body.dark-mode h5,
body.dark-mode h6,
body.dark-mode p,
body.dark-mode span,
body.dark-mode div,
body.dark-mode label,
body.dark-mode li {
  color: #eaeaf2;
}

/* Specific overrides for grey text */
body.dark-mode .text-muted,
body.dark-mode .text-secondary,
body.dark-mode .secondary-text,
body.dark-mode .text-grey,
body.dark-mode .grey-text {
  color: #eaeaf2 !important;
}

/* Tab content areas */
body.dark-mode .tab-pane,
body.dark-mode .tab-content-area {
  background: #2e2e38 !important;
  color: #eaeaf2 !important;
}

/* Additional specific dark mode fixes */
body.dark-mode .file-upload-section,
body.dark-mode .file-structure-section {
  background: #2e2e38 !important;
}

body.dark-mode .file-upload-section h3,
body.dark-mode .file-structure-section h3,
body.dark-mode .execution-content h3 {
  color: #eaeaf2 !important;
  background: #2e2e38 !important;
}

/* Uploaded Files header and container */
body.dark-mode .uploaded-files-header,
body.dark-mode .uploaded-files-section {
  background: #1a1a24 !important;
  color: #eaeaf2 !important;
}

/* All section headers */
body.dark-mode h3,
body.dark-mode .section-header {
  background: #2e2e38 !important;
  color: #eaeaf2 !important;
}

/* Fix any remaining white containers */
body.dark-mode .container,
body.dark-mode .panel,
body.dark-mode .section,
body.dark-mode .card {
  background: #2e2e38 !important;
  color: #eaeaf2 !important;
}

/* Ensure all text content is visible */
body.dark-mode .content,
body.dark-mode .text-content {
  background: #2e2e38 !important;
  color: #eaeaf2 !important;
}

/* Fix execution output header specifically */
body.dark-mode .execution-header {
  background: #1a1a24 !important;
  color: #eaeaf2 !important;
}

/* Additional comprehensive dark mode fixes */
body.dark-mode .execution-result,
body.dark-mode .execution-output,
body.dark-mode .sql-database-container,
body.dark-mode .database-content,
body.dark-mode .loading-container,
body.dark-mode .no-database-container,
body.dark-mode pre,
body.dark-mode code {
  background: #1a1a24 !important;
  color: #eaeaf2 !important;
  border-color: #474755 !important;
}

/* Form controls and inputs */
body.dark-mode select,
body.dark-mode .table-selector,
body.dark-mode .search-field {
  background: #1a1a24 !important;
  color: #eaeaf2 !important;
  border-color: #474755 !important;
}

/* Ensure all section headers have proper styling - blue borders in dark mode, no grey backgrounds */
body.dark-mode .section-header h3,
body.dark-mode .file-structure-section h3,
body.dark-mode .execution-content h3,
body.dark-mode .chat-content h3 {
  color: #eaeaf2 !important;
  border-bottom-color: #21acf6 !important;
  background: transparent !important;
}

/* Make sure all yellow borders become blue in dark mode */
body.dark-mode .tab-btn.active {
  border-bottom-color: #21acf6 !important;
}

/* Fix EYPOR header border in dark mode */
body.dark-mode .sql-header {
  border-bottom-color: #21acf6 !important;
}

/* Remove any remaining yellow borders in dark mode */
body.dark-mode [style*="border-bottom"],
body.dark-mode [style*="border-color: #FFE600"],
body.dark-mode [style*="border-bottom-color: #FFE600"],
body.dark-mode [style*="border-bottom: 2px solid #FFE600"] {
  border-color: #21acf6 !important;
}

/* Execution output specific fixes */
body.dark-mode .execution-output pre,
body.dark-mode .execution-error pre {
  background: #2e2e38 !important;
  color: #eaeaf2 !important;
  border-color: #474755 !important;
}

body.dark-mode .execution-error pre {
  background: rgba(161, 28, 28, 0.1) !important;
  color: #ff6b6b !important;
}

/* Database info sections */
body.dark-mode .database-info-compact,
body.dark-mode .table-selection {
  background: #1a1a24 !important;
  border-color: #474755 !important;
  color: #eaeaf2 !important;
} 